{% extends "::base.html.twig" %}

{% block titulo %} Informe detallado del Area de Ganar - {% endblock %}

{% block stylesheets %}
        <link href="http://d19k46zntalu3t.cloudfront.net/css/bootstrap.css" rel="stylesheet" type="text/css">
        <link href="http://d19k46zntalu3t.cloudfront.net/css/style.css" rel="stylesheet" type="text/css">
        <link href="http://d19k46zntalu3t.cloudfront.net/css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="http://d19k46zntalu3t.cloudfront.net/css/bootstrap.datepicker.css">
       <style type="text/css">
    
           #form_reporte {
            margin-top: 15px;
            padding: 0px;
            }
            
            
        </style>
        
{% endblock %}                 

{% block content %} 
        
<div class="container-fluid">
    <div class="content">
     <div class="row-fluid">
	<div class="span12">

            <div class="box">
                
		<div class="box-head tabs">
                    <h3>Reporte semanal detallado  </h3>
                </div>
       

                <div class="box-content box-nomargin">
        
        <form id="form_reporte" name="form_reporte" method="POST" class="form-horizontal" action="{{path('gana_dashboard_service')}}" >
         <div class="control-group span3">
             <label class="control-label" style="width:auto; margin-left: 40px;" >Red</label>
            <div class="controls" style="margin-left: 90px;">
                <select id="red_lista" name="red_lista" class="rango input-small" >
                   
                </select>
            </div>
        </div>
            
          <div class="control-group span3">
                <label class="control-label" style="width:auto;">
                            Filtro
                        </label>
                    <div class="controls" style="width:auto; margin-left: -40px;">
                        <select id="tipo" name="tipo" class="input-small">
                            <option value="anual">Anual</option>
                            <option value="tri">Trimestral</option>
                            <option value="mensual">Mensual</option>
                        </select>
                    </div>
                </div>
              
                
         <div class="control-group span3" > 
            <label class="control-label"  style="width:auto; margin-left: -10px;" >
                Año</label>
            <div class="controls" style="margin-left: 35px;">
                <input id="year" name="year" class="input-small" type="number">
            </div>
        </div>
         <div class="control-group span3" id="desde_block" name="desde_block" style="display:none;" > 
            <label class="control-label"  style="width:auto; margin-left: -10px;" >
                Desde</label>
            <div class="controls" style="margin-left: 35px;">
                <select id="desde" name="desde" class="input-medium">
                    <option value="1">Enero-Marzo</option>
                    <option value="2">Abril-Junio</option>
                    <option value="3">Julio-Septiembre</option>
                    <option value="4">Octubre-Diciembre</option>
                </select>
            </div>
        </div>
        
        
         <div class="control-group span3">
            
            <div class="controls"  style="width:auto; margin-left: -10px; " >
                <input type="submit" class="btn btn-primary" id="btnGenerar" name="btnGenerar" value="Generar">
            </div>
        </div>
            
            
        </form>
        
 
                </div>
            </div>
            
            <div style="margin-top: 15px;">
                
               
                    <div class="row">
                            <div id="dashboard_div" >
                        
                            </div>                       
                    </div>
                    <div class="row" style="margin-top: 15px;">
                        <div id="dashboard_div2" >
                        
                        </div>
                    </div>
            </div>
        
	
     </div>
    </div>
</div>    
        
     </div>
        
    </div>
</div>
{% endblock %}
      
 {%block javascript %}
            
        <script type="text/javascript" src="http://d19k46zntalu3t.cloudfront.net/js/jquery.js"></script>
            <script type="text/javascript" src="http://d19k46zntalu3t.cloudfront.net/js/bootstrap-typeahead.js"></script>
            <script type="text/javascript" src="http://d19k46zntalu3t.cloudfront.net/js/bootstrap-collapse.js"></script>
            <script type="text/javascript" src="http://d19k46zntalu3t.cloudfront.net/js/bootstrap-button.js"></script>
            <script type="text/javascript" src="http://d19k46zntalu3t.cloudfront.net/js/bootstrap-tooltip.js"></script>
            <script type="text/javascript" src="http://d19k46zntalu3t.cloudfront.net/js/bootstrap-tab.js"></script>
            <script type="text/javascript" src="http://d19k46zntalu3t.cloudfront.net/js/bootstrap.js"></script>    
            <script src="http://d19k46zntalu3t.cloudfront.net/js/custom.js"></script>              
            <!--[if lt IE 9]> <script type="text/javascript" src="http://d19k46zntalu3t.cloudfront.net/js/html5.js"></script><![endif]-->

            <script src="http://d19k46zntalu3t.cloudfront.net/js/bootstrap.datepicker.js"></script>
            <script src="https://www.google.com/jsapi"></script>
            <!--[if lt IE 9]> <script type="text/javascript" src="/net/public/js/html5.js"></script><![endif]-->           

            <script src="{{asset('js/util/functiongen.js')}}"></script>
            <script src="http://d19k46zntalu3t.cloudfront.net/js/util/datatable_plugins.js"></script>
            <script src="{{asset('js/ganar_dashboard.js')}}"></script>
            <script src="{{asset('js/highcharts/highcharts.js')}}"></script>
            <script src="{{asset('js/highcharts/exporting.js')}}"></script>
            
 
    <script type="text/javascript">
        
        radioFunction  = function(){
                if(this.value === 'anual')
                {
                   $("#desde_block").css("display","none");
                }
                if(this.value === 'tri')
                {
                    $("#desde_block").css("display","block");                               
                    cargarSelect(trimestres, "desde", "id", "mes"); 
                }
                if(this.value === 'mensual')
                {
                    $("#desde_block").css("display","block");
                    cargarSelect(meses, "desde", "id", "mes");
                }
               
            };
            
           SuccessFunction = function(data) {
               console.log(data);
                    if(data.responseCode===200 ){    
                
                        alert('Registro Completado');    
                    }
                    else if(data.responseCode===400){//bad request
                       alert('Error bad request');
                        }
                    else{                        
                        if(data.responseCode===500)
                        {
                            alert('Error bad request');
                        }
                        else alert("An unexpeded error occured.");
                        }
                    
                };

        
	$(document).ready(function() {
            
          
           $('#dashboard_div').highcharts({
            title: {
                text: 'Monthly Average Temperature',
                x: -20 //center
            },
            subtitle: {
                text: 'Source: WorldClimate.com',
                x: -20
            },
            xAxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            },
            yAxis: {
                title: {
                    text: 'Temperature (°C)'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                valueSuffix: '°C'
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle',
                borderWidth: 0
            },
            series: [{
                name: 'Tokyo',
                data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
            }, {
                name: 'New York',
                data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
            }, {
                name: 'Berlin',
                data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
            }, {
                name: 'London',
                data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
            }]
        });
       
            $('#dashboard_div2').highcharts({
            chart: {
                type: 'column'
            },
            title: {
                text: 'Monthly Average Rainfall'
            },
            subtitle: {
                text: 'Source: WorldClimate.com'
            },
            xAxis: {
                categories: [
                    'Jan',
                    'Feb',
                    'Mar',
                    'Apr',
                    'May',
                    'Jun',
                    'Jul',
                    'Aug',
                    'Sep',
                    'Oct',
                    'Nov',
                    'Dec'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Rainfall (mm)'
                }
            },
            tooltip: {
                headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                    '<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
                footerFormat: '</table>',
                shared: true,
                useHTML: true
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },
            series: [{
                name: 'Tokyo',
                data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    
            }, {
                name: 'New York',
                data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0, 104.3, 91.2, 83.5, 106.6, 92.3]
    
            }, {
                name: 'London',
                data: [48.9, 38.8, 39.3, 41.4, 47.0, 48.3, 59.0, 59.6, 52.4, 65.2, 59.3, 51.2]
    
            }, {
                name: 'Berlin',
                data: [42.4, 33.2, 34.5, 39.7, 52.6, 75.5, 57.4, 60.4, 47.6, 39.1, 46.8, 51.1]
    
            }]

        });
           
            var d = new Date();
            $("#year").val(d.getFullYear());
          
            redes = getAjaxObject('{{path('services_red')}}');              
            cargarSelect(redes, "red_lista", "int_red_id", "id");
            $("<option value='0'>Todos</option>").appendTo('#red_lista');                                               

            
        
             $("#tipo").change(radioFunction);
             
             
             $("#form_reporte").submit(function(event){
                 event.preventDefault();
                 
                  enviar('{{path('gana_dashboard_service')}}', $("#form_reporte").serializeObject(), SuccessFunction, null);

             });
	 });
  
       
      
       </script>
{%endblock %} 
